enum PointHistoryType {
  CHARGE // 충전
  USE // 사용
  CANCEL // 사용 취소
}

model Point {
  userId String @id // PK
  amount Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  version   Int      @default(0)

  // Relations
  user           User           @relation(fields: [userId], references: [id])
  pointHistories PointHistory[]
}

model PointHistory {
  id        String           @id @default(uuid()) // PK
  userId    String // FK       
  orderId   String? // FK (포인트 사용 시 연결)
  type      PointHistoryType
  amount    Int // 변동량 (+ 또는 -)
  balance   Int // 잔액
  createdAt DateTime         @default(now())

  // Relations
  point Point @relation(fields: [userId], references: [userId])
}
